<template name="activerooms">
  <div id="activerooms">
  {{#if rooms}}
    {{#each rooms}}
      {{> room}}
    {{/each}}
  {{/if}}
  </div>
</template>

<template name="room">
{{#if showroom}}
  <div id="room_{{roomid}}" class="room">
    <div class="roomtitlebar">
      <span class="roomtitle">{{roomname}}</span>
      <span type="button" class="showaddfriendsbutton panelbutton">add friends to this room</span>
    </div>

    {{#if isadmin}}
      {{#if addingfriends}}
      <div class="addfriendsdialog">
        <div>add friends</div>
        <div id="friendsforroom_{{roomid}}">
        {{#if friendsforadd}}
          {{#each friendsforadd}}
            {{> frienditem}}
          {{/each}}
        {{/if}}
        </div>
        
        {{#unless friendsforadd}}
        <div>no friends chilln to add</div>
        {{/unless}}

        <span id="addfriendsbutton" class="addfriendsbutton panelbutton">add friends</span>
        <span class="hideaddfriendsbutton panelbutton">cancel</span>
      </div>
      {{/if}}
    {{/if}}
    <div id="room_{{roomid}}_messagelist" class="messagelist">
    {{#each messages}}
      {{> message}}
    {{/each}}
    </div>
    <div class="fixedbottom">
      <textarea id="messagetext_{{roomid}}" class="messageinput" />
    </div>
  </div>
{{/if}}
</template>

<template name="message">
  <div class="message">
    <span class="author">{{authorname}}</span>
    {{#if serverconfirmed}}
    <span class="datetime">{{readabledatetime}}</span>
    <div class="message">{{message}}</div>
    {{/if}}

    {{#unless serverconfirmed}}
    <div class="pendingmessage">{{message}}</div>
    {{/unless}}
  </div>
</template>

<template name="frienditem">
  <div class="frienditem">
    <input type="checkbox" value="{{_id}}">{{name}}</input>
  </div>
</template>
